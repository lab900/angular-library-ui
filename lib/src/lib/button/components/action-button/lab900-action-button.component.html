@if (!hidden()) {
  @let type = buttonType();
  @if (type !== 'toggle') {
    @let _subActions = subActions();
    @if (_subActions && _subActions?.length) {
      <lab900-button
        (click)="$event.stopPropagation()"
        [type]="type"
        [matMenuTriggerFor]="sub"
        [label]="label()"
        [matTooltip]="action()?.tooltip?.value | translate"
        [prefixIcon]="prefixIcon()"
        [suffixIcon]="suffixIcon()"
        [matTooltipPosition]="tooltipPosition()"
        [svgIcon]="!!action()?.svgIcon"
        [containerClass]="containerClass()"
        [id]="buttonId()" />
      <mat-menu #sub="matMenu">
        @for (action of _subActions; track action.label) {
          <!-- please keep this mat-menu-item wrapper, it's fake but angular mat menu needs it in the same component -->
          <button mat-menu-item [disabled]="disabled()" style="padding: 0">
            <lab900-action-button-menu-item [action]="action" [data]="data()" [menuDisabled]="disabled()" />
          </button>
        }
      </mat-menu>
    } @else {
      <lab900-button
        [type]="type"
        [color]="themeColor()"
        [disabled]="disabled()"
        (btnClick)="doAction($event)"
        [label]="label()"
        [matTooltip]="action()?.tooltip?.value | translate"
        [prefixIcon]="prefixIcon()"
        [suffixIcon]="suffixIcon()"
        [matTooltipPosition]="tooltipPosition()"
        [svgIcon]="!!action()?.svgIcon"
        [containerClass]="containerClass()"
        [id]="buttonId()" />
    }
  } @else {
    <lab900-action-button-toggle [action]="action()" [data]="data()" />
  }
}
