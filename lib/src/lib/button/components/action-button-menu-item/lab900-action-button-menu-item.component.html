@if (!hidden()) {
  @let _subActions = subActions();
  @if (_subActions && _subActions?.length) {
    <button
      #trigger="matMenuTrigger"
      mat-menu-item
      [matMenuTriggerFor]="sub"
      [disabled]="menuItemDisabled()"
      [matTooltip]="action()?.tooltip?.value | translate"
      [matTooltipPosition]="tooltipPosition()"
      (mouseenter)="trigger.openMenu()"
      lab900PreventDoubleClick>
      @if (prefixIcon(); as icon) {
        <mat-icon>{{ icon }}</mat-icon>
      }
      <span>{{ label() | translate }}</span>
      @if (suffixIcon(); as icon) {
        <mat-icon>{{ icon }}</mat-icon>
      }
    </button>
    <mat-menu #sub="matMenu">
      @for (action of _subActions; track action.label) {
        <!-- please keep this mat-menu-item wrapper, it's fake but angular mat menu needs it in the same component -->
        <button mat-menu-item [disabled]="disabled()" style="padding: 0">
          <lab900-action-button-menu-item [action]="action" [data]="data()" [menuDisabled]="disabled()" />
        </button>
      }
    </mat-menu>
  } @else {
    <button
      mat-menu-item
      (throttledClick)="doAction($event)"
      [disabled]="menuItemDisabled()"
      [matTooltip]="action()?.tooltip?.value | translate"
      [matTooltipPosition]="tooltipPosition()"
      lab900PreventDoubleClick>
      @if (prefixIcon(); as icon) {
        <mat-icon>{{ icon }}</mat-icon>
      }
      <span>{{ label() | translate }}</span>
      @if (suffixIcon(); as icon) {
        <mat-icon>{{ icon }}</mat-icon>
      }
    </button>
  }
}
