import{e as I,f as y,h as f,i as B,j as _,o as L}from"./chunk-TJHDH3WY.js";import{Ba as m,Ec as M,Fa as z,G as V,H as w,Ha as u,Kc as F,a as b,b as k,da as h,ga as R,i as x,ib as E,ja as a,jb as O,k as D,l as d,r as S,vb as T}from"./chunk-2K2JK6TO.js";var Q=(()=>{class r{constructor(){this.inlineEditingCellKey=u(void 0),this.disableEditing=u(!1),this._tabs=u([]),this.tabs=this._tabs.asReadonly(),this._tabId=u(null),this.tabId=M(()=>this._tabId()??this._tabs()?.[0]?.id),this.sort=u(void 0)}static reorderColumnsFn(e,t){return(e.columnOrder??1e4)-(t.columnOrder??1e4)}updateTabId(e){this._tabId.set(e)}updateDisableEditing(e){this.disableEditing.set(e)}updateTabs(e){this._tabs.set([...e??[]])}updateSorting(e){this.sort.set(e?[...e]:void 0)}updateColumnSorting(e,t,s){let i=e.sortKey??e.key;this.sort.update((o=[])=>{if(t){let l=o.findIndex(c=>c.id===i);if(l>=0){let{direction:c}=o[l];c==="desc"?o.splice(l,1):o[l]=k(b({},o[l]),{direction:"desc"})}else o.push({id:i,direction:"asc"});return[...o]}else{let l=o.find(c=>c.id===i);return[{id:i,direction:l?.direction==="asc"?"desc":"asc"}]}}),s?.(this.sort())}startInlineEditing(e){this.inlineEditingCellKey.set(e)}closeInlineEditing(){this.inlineEditingCellKey.set(void 0)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=h({token:r,factory:r.\u0275fac})}}return r})();function J(r){return r&&typeof r.connect=="function"&&!(r instanceof D)}var v=function(r){return r[r.REPLACED=0]="REPLACED",r[r.INSERTED=1]="INSERTED",r[r.MOVED=2]="MOVED",r[r.REMOVED=3]="REMOVED",r}(v||{}),ee=new R("_ViewRepeater"),P=class{applyChanges(n,e,t,s,i){n.forEachOperation((o,l,c)=>{let g,p;if(o.previousIndex==null){let C=t(o,l,c);g=e.createEmbeddedView(C.templateRef,C.context,C.index),p=v.INSERTED}else c==null?(e.remove(l),p=v.REMOVED):(g=e.get(l),e.move(g,c),p=v.MOVED);i&&i({context:g?.context,operation:p,record:o})})}detach(){}};var W=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new d;constructor(n=!1,e,t=!0,s){this._multiple=n,this._emitChanges=t,this.compareWith=s,e&&e.length&&(n?e.forEach(i=>this._markSelected(i)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(t=>this._markSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(t=>this._unmarkSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,t=new Set(n.map(i=>this._getConcreteValue(i)));n.forEach(i=>this._markSelected(i)),e.filter(i=>!t.has(this._getConcreteValue(i,t))).forEach(i=>this._unmarkSelected(i));let s=this._hasQueuedChanges();return this._emitChangeEvent(),s}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let t of e)if(this.compareWith(n,t))return t;return n}else return n}};var te=(()=>{class r{_listeners=[];notify(e,t){for(let s of this._listeners)s(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(t){return new(t||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var j=20,U=(()=>{class r{_ngZone=a(m);_platform=a(y);_renderer=a(E).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new d;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=j){return this._platform.isBrowser?new x(t=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let s=e>0?this._scrolled.pipe(w(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):S()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let s=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(V(i=>!i||s.indexOf(i)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((s,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_scrollableContainsElement(e,t){let s=I(t),i=e.getElementRef().nativeElement;do if(s==i)return!0;while(s=s.parentElement);return!1}static \u0275fac=function(t){return new(t||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),nt=(()=>{class r{elementRef=a(z);scrollDispatcher=a(U);ngZone=a(m);dir=a(L,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new d;_renderer=a(O);_cleanupScroll;_elementScrolled=new d;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let t=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=s?e.end:e.start),e.right==null&&(e.right=s?e.start:e.end),e.bottom!=null&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),s&&_()!=f.NORMAL?(e.left!=null&&(e.right=t.scrollWidth-t.clientWidth-e.left),_()==f.INVERTED?e.left=e.right:_()==f.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let t=this.elementRef.nativeElement;B()?t.scrollTo(e):(e.top!=null&&(t.scrollTop=e.top),e.left!=null&&(t.scrollLeft=e.left))}measureScrollOffset(e){let t="left",s="right",i=this.elementRef.nativeElement;if(e=="top")return i.scrollTop;if(e=="bottom")return i.scrollHeight-i.clientHeight-i.scrollTop;let o=this.dir&&this.dir.value=="rtl";return e=="start"?e=o?s:t:e=="end"&&(e=o?t:s),o&&_()==f.INVERTED?e==t?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:o&&_()==f.NEGATED?e==t?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:e==t?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}static \u0275fac=function(t){return new(t||r)};static \u0275dir=T({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return r})(),G=20,rt=(()=>{class r{_platform=a(y);_listeners;_viewportSize;_change=new d;_document=a(F,{optional:!0});constructor(){let e=a(m),t=a(E).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let s=i=>this._change.next(i);this._listeners=[t.listen("window","resize",s),t.listen("window","orientationchange",s)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+t,height:s,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),s=e.documentElement,i=s.getBoundingClientRect(),o=-i.top||e.body.scrollTop||t.scrollY||s.scrollTop||0,l=-i.left||e.body.scrollLeft||t.scrollX||s.scrollLeft||0;return{top:o,left:l}}change(e=G){return e>0?this._change.pipe(w(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{J as a,v as b,ee as c,P as d,W as e,te as f,U as g,nt as h,rt as i,Q as j};
